@tailwind base;
@tailwind components;
@tailwind utilities;

/* ── Geist fonts via CDN (loaded in layout) ── */

/* ── Design tokens ── */
:root {
  --font-sans: 'IBM Plex Sans', system-ui, sans-serif;
  --font-mono: 'IBM Plex Mono', 'Fira Code', monospace;
}

/* DARK MODE (default) */
html, html.dark {
  --surface:    #0a0a0a;
  --surface-1:  #111111;
  --surface-2:  #171717;
  --surface-3:  #1f1f1f;
  --surface-4:  #282828;
  --border:     #242424;
  --border-subtle: #1c1c1c;
  --fg:         #ededed;
  --fg-muted:   #8c8c8c;
  --fg-faint:   #484848;
  --accent:     #ededed;
  --accent-inv: #0a0a0a;
  --hover:      rgba(255,255,255,0.04);
  --active:     rgba(255,255,255,0.08);
  /* syntax — greyscale with just enough distinction */
  --syn-kw:     #ededed;
  --syn-fn:     #d4d4d4;
  --syn-str:    #a0a0a0;
  --syn-num:    #b0b0b0;
  --syn-com:    #525252;
  --syn-typ:    #c8c8c8;
  --syn-pkg:    #b8b8b8;
  --syn-op:     #ededed;
  /* status */
  --ok:         #22c55e;
  --err:        #ef4444;
  --warn:       #f59e0b;
  --info:       #93c5fd;
}

/* LIGHT MODE */
html.light {
  --surface:    #ffffff;
  --surface-1:  #fafafa;
  --surface-2:  #f5f5f5;
  --surface-3:  #efefef;
  --surface-4:  #e8e8e8;
  --border:     #e8e8e8;
  --border-subtle: #f0f0f0;
  --fg:         #111111;
  --fg-muted:   #737373;
  --fg-faint:   #c4c4c4;
  --accent:     #111111;
  --accent-inv: #ffffff;
  --hover:      rgba(0,0,0,0.03);
  --active:     rgba(0,0,0,0.06);
  --syn-kw:     #111111;
  --syn-fn:     #2d2d2d;
  --syn-str:    #595959;
  --syn-num:    #525252;
  --syn-com:    #aaaaaa;
  --syn-typ:    #3d3d3d;
  --syn-pkg:    #474747;
  --syn-op:     #111111;
  --ok:         #16a34a;
  --err:        #dc2626;
  --warn:       #d97706;
  --info:       #3b82f6;
}

/* ── Base ── */
* { box-sizing: border-box; }
html, body { height: 100%; overflow: hidden; }
body {
  background: var(--surface);
  color: var(--fg);
  font-family: var(--font-sans);
  font-size: 13px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ── Scrollbar ── */
::-webkit-scrollbar { width: 4px; height: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }
::-webkit-scrollbar-thumb:hover { background: var(--fg-faint); }

/* ── Selection ── */
::selection { background: rgba(100,100,100,0.25); }

/* ── Focus ring ── */
:focus-visible {
  outline: 1.5px solid var(--fg-muted);
  outline-offset: 1px;
  border-radius: 3px;
}

/* ── Code editor overlay trick ── */
.editor-textarea {
  position: absolute;
  inset: 0;
  color: transparent;
  caret-color: var(--fg);
  background: transparent;
  border: none;
  outline: none;
  resize: none;
  font-family: var(--font-mono);
  font-size: 13px;
  line-height: 21px;
  padding: 12px 0 12px 16px;
  white-space: pre;
  overflow: hidden;
  tab-size: 4;
  z-index: 2;
}
.editor-highlight {
  padding: 12px 0 12px 16px;
  font-family: var(--font-mono);
  font-size: 13px;
  line-height: 21px;
  white-space: pre;
  pointer-events: none;
  z-index: 1;
  word-break: normal;
  overflow-wrap: normal;
  padding-bottom: 200px;
}
.editor-textarea { padding-bottom: 200px; }

/* Syntax token colours */
.syn-kw  { color: var(--syn-kw);  font-weight: 500; }
.syn-fn  { color: var(--syn-fn); }
.syn-str { color: var(--syn-str); }
.syn-num { color: var(--syn-num); }
.syn-com { color: var(--syn-com); font-style: italic; }
.syn-typ { color: var(--syn-typ); }
.syn-pkg { color: var(--syn-pkg); }
.syn-op  { color: var(--syn-op); }

/* ── Animations ── */
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(6px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}
@keyframes spin {
  to { transform: rotate(360deg); }
}
.animate-fade-up { animation: fadeUp 200ms ease forwards; }
.animate-fade-in { animation: fadeIn 150ms ease forwards; }
.animate-spin { animation: spin 1s linear infinite; }

/* ── Utility ── */
.no-select { user-select: none; }
.truncate { overflow: hidden; white-space: nowrap; text-overflow: ellipsis; }